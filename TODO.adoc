= TODO

* Continuous integration.
  ** [ ] Use `nixosConfigurations` to test the `nixosModule`.

* Developer experience.
  ** [ ] Support GitHub Codespaces.
    *** Currently there is a bug with Nix in Codespaces: https://github.com/NixOS/nix/issues/6680
      **** [x] Doesn't matter, now that we are using Alpine with Nix.
    *** Using Nix installed on top of the official Alpine Image seems to work well.
    *** Still ran into issues with GitHub Codespaces: I think I'm just running out of disk space.

* Backend.
  ** [ ] File uploads.
    *** [x] Profile pictures.
    *** [x] Space pictures.
    *** [ ] Desk pictures.
  ** [ ] Forbid creating reservations in the past. Maybe this should be configurable for each space (or role?).
  ** [ ] Check `deskList`: It looks like this also works when you are not a member, but the space is discoverable.
  ** [x] Is it possible to call `/space/view` without the `view-space` permission?
    *** This should not be possible.
    *** It is indeed possible to do so and you get a HTTP 403 answer.
    *** Should this functionality be split out into a `/space/preview` route?

* Frontend.
  ** [ ] Improve Dashboard UI.
  ** [ ] Improve user settings UI.
    *** [x] Move button to go to "Edit Desks" page to settings.
    *** [ ] Handle different kinds of permissions properly.
      **** Avoid error on the settings page by disabling what is not available to the user.
  ** [ ] Improve look of user preview for users without `edit-user` permission.
  ** [ ] Add wrapper function that sets ALL font properties at once, so you cannot forget anything.
  ** [ ] Light/Dark mode.
  ** [ ] Factor out duplicate code (buttons, styling and so on).
  ** [ ] Automatically add desks when creating a space.
    *** This could be achieved with a selector of how many desks you want and then adding default desks.
  ** [ ] Title in header will cut off titles that are too long. This looks broken. Maybe add ellipsis "...".
  ** [ ] Filter "Your Reservations".
    *** [ ] Filter by space.

* Wording and explanation.
  ** [ ] A space is just an environment for desks and not the desk itself.
  ** [ ] Roles and permissions are complicated. This needs some better description, tooltips (info icon) and interface.

* Pin timezone libraries.
  ** [x] tzdata library for Haskell.
    *** Is pinned in `server/subflake.nix`.
  ** [x] justinmimbs/timezone-data for Elm.
    *** Is pinned in `frontend/{elm.json,elm-srcs.nix,registry.dat}`.
  ** [x] Matching IANA database versions.
  ** [ ] Make sure, that justinmimbs/timezone-data (Elm) actually covers all identifiers.
    *** The currently used elm library seems to be missing some identifiers such as:
      **** `Atlantic/Reykjavik`

* Password forgotten.
  ** [ ] Backend implementation.
  ** [ ] Frontend implementation.
  ** Idea for an implementation:
    *** Send an email to the owner of the account.
    *** In the email is a link to set a new password.
    *** Only after following the link and giving a new password the password will be overwritten.
    *** The link will only be valid for a short time.
  ** Thoughts on the current idea:
    *** If anyone can guess that link, they can reset the password for other accounts.

* Rooms.
  ** [ ] Desks can be assigned to rooms.
    *** Desk location will always refer to the assigned room.
    *** Can desks have a location without a room? Probably not.
  ** [ ] Whole rooms can be booked.
    *** [ ] Rooms can only be booked when no desk in the room is already booked.
    *** [ ] Booked rooms block all desks inside that room.
  ** [ ] Rooms are displayed nicely in the 2D room view.
  ** [ ] Rooms can be edited independently of desks.
  ** [ ] Add editor for room layout.

* Metadata
  ** [ ] Add metadata to spaces.
    *** [ ] City.
    *** more?
  ** [ ] Add metadata to desks.
    *** [ ] Power outlet.
    *** [ ] Monitor.
    *** [ ] Window.
    *** more?

* Signed reservation emails.
  ** When the server sends the "Reservation created" notification email, we can attach a QR code.
  ** This QR code is signed by the server.
  ** The server saves its private key in its database.
  ** The server shares a public key to verify the signature.
  ** Some app (???) can then verify this QR code.
    *** That way you know that the person show that QR code is actually the person that booked the reservation.

* Smart desk assignment.
  ** Users can choose to reserve any desk (not a specific one).
  ** Mensam will not choose the desk until the reservation actually happens.
  ** That way other people with preferences can still choose whatever they want.

* Google calendar integration.

* Microsoft Outlook calender integration.
